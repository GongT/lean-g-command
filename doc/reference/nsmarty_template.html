<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="description" content="Lean-g-command : the first leancloud framework">
	
	<link rel="stylesheet" type="text/css" media="screen" href="/lean-g-command/stylesheets/stylesheet.css">
	<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js"></script>
	<title>the Leancloud framework G</title>
	
	<script type="text/javascript">
		var isWindows = navigator.appVersion.indexOf("Win") != -1;
		$(function (){
			$('body').addClass(isWindows? 'windows' : 'unix');
		});
	</script>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
	<header class="inner">
		<a id="homepage_banner" href="/lean-g-command/doc">首页</a>
		<a id="menu_banner" href="./index.html">目录</a>
		<script type="text/javascript">
			if(/index\.html$/.test(location.href) || /\/$/.test(location.href)){
				$('#menu_banner').attr('href', '..');
			}
			if(/\/doc\/$/.test(location.href)){
				$('#menu_banner').hide();
			}
		</script>
		<a id="forkme_banner" href="https://github.com/GongT/lean-g-command">View on GitHub</a>
		
		<h1 id="project_title">the Leancloud framework G</h1>
		
		<h2 id="project_tagline"></h2>
	</header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
	<section id="main_content" class="inner">

<h1>NSmarty 模板引擎介绍</h1>

<section>
	<h2>基本语法</h2>
	
	<h4>注释</h4>
	<pre>{&#42; wow such a doge *}</pre>
	
	<h4>输出变量、赋值</h4>
	<code class="nsmarty block">{$date='2112-09-03'}
今天是：{$date}！也可以写成：{$date|replace:'-':'/'}！</code>
	输出结果：
	<code>今天是：2112-09-03！也可以写成：2112/09/03！</code>
	
	<h4>输出数组和对象（nsmarty不区分数组和对象，数字可以理解为数字索引的对象）</h4>
	<code class="nsmarty block">{$people=[name=> '八云紫']}
{$people.age=17}                 {&#42; 使用“点” 和 *}
{$people['gender']='少女'}       {&#42; 用中括号 （是一样的 但中括号里面可以有特殊字符，例如空格） *}
她是{$people.gender}{$people.name}，今年{$people['age']}岁。</code>
	输出结果：
	<code title="不服憋着！">她是少女八云紫，今年17岁。</code>
	
	<h4>分支</h4>
	<code class="nsmarty block">{$selectedPlayer=0}
{if $selectedPlayer eq 0}
你选了灵梦
{elseif $selectedPlayer eq 1}
你选了魔理沙
{elseif $selectedPlayer eq 2}
你选了冴月麟
{/if}</code>
	输出结果：
	<code>你选了灵梦</code>
	
	<h4>循环</h4>
	<h5>foreach</h5>
	<code class="nsmarty block">&lt;table style="width:100%;">&lt;tr>
		{$colors=[honoka=>'#D98545', eli=>'#FEF0B5',kotori=>'#C3A48A',umi=>'#7171A6',
			rin=>'#F08C6C',maki=>'#DD6467',nozomi=>'#685A8A',hanayo=>'#FBE48B',nico=>'#5B5B5B']}
			
			{foreach $colors as $name => $code}
			&lt;td style="background-color:{$code};">{$name}&lt;/td>
			{/foreach}	
								&lt;/tr>&lt;/table></code>
	输出结果：
	<table style="width:100%;">
		<tr>							<td style="background-color:#D98545;text-align:center;" >honoka</td>
							<td style="background-color:#FEF0B5;text-align:center;" >eli</td>
							<td style="background-color:#C3A48A;text-align:center;" >kotori</td>
							<td style="background-color:#7171A6;text-align:center;" title="我老婆">umi</td>
							<td style="background-color:#F08C6C;text-align:center;" >rin</td>
							<td style="background-color:#DD6467;text-align:center;" >maki</td>
							<td style="background-color:#685A8A;text-align:center;" >nozomi</td>
							<td style="background-color:#FBE48B;text-align:center;" >hanayo</td>
							<td style="background-color:#5B5B5B;text-align:center;" >nico</td>
			</tr>
	</table>
	
	<h5>for A to B</h5>
	<code class="nsmarty block">{$number=[1,2,3,4,5,6,7,8,'⑨']}
{for $i=0 to $number|count}
	{$i}: {$number[$i]}、
{/for}</code>
	输出结果：
<code>			0: 1、
			1: 2、
			2: 3、
			3: 4、
			4: 5、
			5: 6、
			6: 7、
			7: 8、
			8: ⑨、
	</code>
	
	<div> ---</div> 
	<code class="nsmarty block">{for $i=0 to 10}
	{$i}、
{/for}</code>
	输出结果：
	<code>0、1、2、3、4、5、6、7、8、9、10、</code>
	
	<div class="important">循环过程中可以用{break}和{continue}哦～</div>
	
	<h4>过滤器</h4>
	
	<p>
		输出变量时使用过滤器：如上面的{$date|replace:'-':'/'}<br/>
		完整的过滤器列表看下面的“内置扩展”
	</p>
	
	<p>
		有时需要连续使用同一个过滤器，可以使用setfilter：
	<code class="block nsmarty">{setfilter escape}
	1: {$foo}
	2: {$bar}
{/setfilter}</code>
	</p>
	
	<h4>函数</h4>
	可以在模板中使用提前定义好的函数实现简单的逻辑:，函数的调用方式是：
	
	<code class="block nsmarty">{inline_function_name $var1 $var2 var_name=$var_value}</code>
	<code class="block nsmarty">{block_function_name $var1 $var2 var_name=$var_value}
	bla bla...
	{/block_function_name}</code>
	一个inline_function不可以用block_function的方式调用，下面的写法是错的（反之亦然）
	<code class="block nsmarty">{inline_function_name $params}{/inline_function_name}</code>
	一个函数至少有一个参数，否则无法调用。
	<a href="###" title="因为调用函数会消耗资源，固定不变的内容总是有别的办法实现">为什么？</a>
	
	<h4>引用文件</h4>
<code class="block nsmarty">{include file="./file_in_same_folder.tpl"}
{include file="../file_in_parent_folder.tpl"}
{include file="/absolute/file/path/file.tpl"}
{include file="$var_path/file.tpl"}
{include file="relative/to/template/root/file.tpl"}</code>
	以上是所有可能的引用文件的方式
	<ul>
		<li>由./或../开头：相对于写这一行的文件的路径</li>
		<li>由/开头：文件系统绝对路径</li>
		<li>其他开头：从模板目录中找</li>
	</ul>
	使用变量时，先展开变量内容，再根据上面的规则找到模板<br/>
	模板目录可以通过配置文件修改（不建议）
	
	<h4>字面值</h4>
	很多时候，尤其是写script标签的的时候，会需要用很多大括号，但不想它们被转义，那么可以使用字面值：
	
	<code class="block nsmarty">&lt;script type="text/javascript">&#123;literal}
var json = {Flandre:'Scarlet'};
&#123;/literal}&lt;/script></code>
</section>

<section>
	<h2>block和extends - 模板继承</h2>

</section>

<section>
	<h2>内置扩展</h2>
	
	<h3>函数</h3>
	<h4>capture</h4>
	<code class="block nsmarty">this will be {capture name='cap1'}
	captured:
	{for $i=1 to 10}
		{$i}
	{/for}
{/capture} not capture.&lt;br/>&lt;br/>
{$smarty.capture.cap1}
</code>
	
	输出结果：
	<code style="white-space:nowrap;display:block;">
	this will be	not capture.<br/><br/>
				captured:			1
					2
					3
					4
					5
					6
					7
					8
					9
					10
				
	</code>
	
	<h3>过滤器</h3>
</section>

<section>
	<h2>编写扩展</h2>
</section>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
	<footer class="inner">
		<p class="copyright">Lean-g-command maintained by
			<a href="https://github.com/GongT">GongT</a>
		</p>
		<p>Published with
			<a href="https://pages.github.com">GitHub Pages</a>
		</p>
	</footer>
</div>

</body>
</html>
